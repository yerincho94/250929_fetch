<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JSON</title>
  </head>
  <body>
    <script>
      //JSON : 데이터 교환시 자주 사용되는 포멧
      /* 
            인터넷에서 실제적으로 교환되는 것은 text이다.
            그래서 parsing이라는 작업이 있다.
            - 직렬화 : 텍스트화, 문자열화, 해체과정
            - 역직렬화 : 파싱(parsing), 규칙에 따라서 변역해주는 과정, 구조화 
                                        -> 객체 / 데이터 타입
            - XML (html <>...</>), JSON (JSON 객체로 되어 있음) 
        */
      /*
        {
            "id" : 1,
            "name" : "kim",
            "job" : {
                "name" : "programmer",
                "language" : "java",
                "salary" : 2000
            },
            "hobby" : ["soccer", "game"]
        }
       */
      const obj = {
        id: 1,
        name: "kim",
        job: {
          name: "programmer",
          language: "java",
          salary: 2000, //객체는 ,가 가능한데, JSON은 불가능
        },
        hobby: ["soccer", "game"],
      };
      //JSON string 으로 바꿔야한다.
      const jsonString = JSON.stringify(obj); //문자열화 시키면서 들여쓰기가 공백 /탭으로 이뤄져 있음.
      console.log(jsonString); //key를 나타낼 때 ""로 표시한다. -> JSON은 작은 따옴표를 키 표시하는데 사용하지 않음.
      //맨 마지막 속성이나 요소에 대한 ,(콤마) 표시를 허용하지 않음.

      const obj2 = JSON.parse(jsonString); //JSON 형식을 준수하는 문자열을 넣으면 JS 객체화
      console.log(obj2); // JSON스타일을 준수하는 객체나 배열의 경우에는 잘 변환이 되어서 전달됨.

      //2가지 측면
      /*
        1. 객체를 JSON.stringify를 해서 문자열화를 신경써야하는 경우
        2. 문자열을 JSON.parse를 해서 객체화/배열을 신경써야하는 경우

        JSON은 어떤 것을 데이터로 품을 수 있는가?
         - JSON Object 형태
         - JSON Array 형태
         이외의 객체는 허용되지 않음.
         - number, string, boolean, null 허용
         - function, undefined은 허용하지 않음.
      */
      const objTest = {
        //지금은 객체 상태
        int: 1234,
        negInt: -1234,
        float: 12.345,
        undef: undefined, //stringify에서 생략됨
        nill: null, //얘는 살아남음. (공식적으로 남긴다는 뜻이 있기 때문에 괜찮음)
        func: () => {}, //stringify에서 생략됨
        boo: true,
        arr: [1, "1", undefined], //배열값의 undefined는 null로 변환됨.
      };
      const jsonStringTest = JSON.stringify(objTest);
      console.log(jsonStringTest);
      /*
        {"int":1234,"negInt":-1234,"float":12.345,"nill":null,"boo":true, "arr":[1,"1",null]}
      */

      const rawJsonString = '{"name" : "kim", "age" : 20}'; //JSON String 형태
      const jsonObj = JSON.parse(rawJsonString); //json string -> object
      console.log(jsonObj); //객체상태

      //   const rawJsonString2 = "{'name':'kim', 'age': 25}"; // '로 문자열이나 키를 나타낼 경우
      //   const jsonObj2 = JSON.parse(rawJsonString2); // SyntaxError
      //   console.log(jsonObj2);

      //   const rawJsonString3 = '{"name":"kim", "age": 25,}'; // 추가적인 ,가 있으면 뒤에 키가 올 것으로 예상
      //   const jsonObj3 = JSON.parse(rawJsonString3); // SyntaxError
      //   console.log(jsonObj3);
    </script>
  </body>
</html>
